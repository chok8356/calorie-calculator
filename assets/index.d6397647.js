import{a as L,I as M,_ as A,b as I}from"./ui.vue_vue_type_script_setup_true_lang.dc5a692a.js";import{h as N,a as y,u as U,c as g,B as k,L as z}from"./ui.4e7c0ed8.js";import{_ as $,o as r,a as l,j as d,d as p,q as T,i as b,n as c,b as i,u as s,g as m,c as B,k as _,l as F,w as C,s as V,t as w,F as h,e as S,m as x,f as H}from"./index.4d8058f6.js";const q={},D={fill:"currentColor",height:"1em",viewBox:"0 0 512 512",width:"1em",xmlns:"http://www.w3.org/2000/svg"},K=d("path",{d:"M498 142.08l-56.6 56.55-128-128 56.55-56.55a48 48 0 0 1 67.91 0L498 74.17a48 48 0 0 1 0 67.91z",opacity:"0.4"},null,-1),Q=d("path",{d:"M12.85 371.11L.15 485.33a24 24 0 0 0 26.49 26.51l114.14-12.6 278-278-128-128z"},null,-1),R=[K,Q];function W(a,t){return r(),l("svg",D,R)}const j=$(q,[["render",W]]),O=["placeholder","value"],X=p({__name:"ui",props:{value:{default:""},placeholder:{default:""}},emits:["update:value"],setup(a,{emit:t}){const e=n=>{var o;t("update:value",((o=n==null?void 0:n.target)==null?void 0:o.value)||"")};return(n,o)=>(r(),l("textarea",T({class:["scrollbar",n.$style.textarea],placeholder:a.placeholder,value:a.value},n.$attrs,{onInput:e}),null,16,O))}}),Y={$style:N},G=$(X,[["__cssModules",Y]]),J=p({__name:"ui",props:{id:null},setup(a){const t=a,e=y(),n=U(),o=()=>{!t.id||(t.id===e.productForForm.id&&(e.setProductForForm(g()),e.setEditing(!1)),e.deleteProductByIdAsync({id:t.id}),n.deleteProductFromMealPlanAsync(t.id))};return(u,P)=>(r(),l("div",{class:c(u.$style.root),onClick:o},[b(u.$slots,"default",{},()=>[i(s(L),{class:c(u.$style.icon)},null,8,["class"])])],2))}}),Z="HW8fK",tt="AjBT5",st={root:Z,icon:tt},et={$style:st},ot=$(J,[["__cssModules",et]]),nt=p({__name:"ui",props:{id:null},setup(a){const t=a,e=y(),n=async()=>{if(!t.id)return;const o=await e.getProductByIdAsync({id:t.id});o&&(e.setProductForForm(o),e.setEditing(!0))};return(o,u)=>(r(),l("div",{class:c(o.$style.root),onClick:n},[b(o.$slots,"default",{},()=>[i(s(j),{class:c(o.$style.icon)},null,8,["class"])])],2))}}),rt="HgnBs",ct="MzdNN",at={root:rt,icon:ct},lt={$style:at},ut=$(nt,[["__cssModules",lt]]),it=p({__name:"ui",setup(a){const t=y();return(e,n)=>(r(),m(s(M),{placeholder:"Product search by name",size:"lg",type:"secondary",value:s(t).query,"onUpdate:value":s(t).setQuery},null,8,["value","onUpdate:value"]))}}),dt=p({__name:"ui",setup(a){const t=y(),e=B(()=>!t.productForForm.name),n=async()=>{t.createProductAsync({product:t.productForForm}),t.setProductForForm(g())};return(o,u)=>(r(),m(s(k),{disabled:s(e),onClick:C(n,["stop"])},{default:_(()=>[F(" Add ")]),_:1},8,["disabled","onClick"]))}}),pt=p({__name:"ui",setup(a){const t=y(),e=async()=>{t.updateProductByIdAsync({product:t.productForForm}),t.setProductForForm(g()),t.setEditing(!1)};return(n,o)=>(r(),m(s(k),{onClick:C(e,["stop"])},{default:_(()=>[F("Save")]),_:1},8,["onClick"]))}}),_t=d("label",null," Name ",-1),mt=d("label",null," Description ",-1),yt=p({__name:"ui",setup(a){const t=y(),e=B({get(){return t.productForForm},set(o){t.setProductForForm(o)}}),n=()=>{t.setProductForForm(g()),t.setEditing(!1)};return V(()=>{n()}),(o,u)=>{var P;return r(),l("div",{class:c([o.$style.form,{[o.$style.editing]:s(t).editing}])},[d("h3",null,w(s(t).editing?"Edit":"Create")+" product",1),d("div",{class:c(o.$style.inputs)},[_t,i(s(M),{value:s(e).name,"onUpdate:value":u[0]||(u[0]=f=>s(e).name=f)},null,8,["value"]),mt,i(s(G),{value:s(e).description,"onUpdate:value":u[1]||(u[1]=f=>s(e).description=f),rows:"3"},null,8,["value"]),(r(!0),l(h,null,S(((P=s(e))==null?void 0:P.nutritionFacts)||{},(f,v)=>(r(),l(h,{key:v},[d("label",null,w(v),1),i(s(A),{value:s(e).nutritionFacts[v],"onUpdate:value":E=>s(e).nutritionFacts[v]=E},null,8,["value","onUpdate:value"])],64))),128))],2),d("div",{class:c(o.$style.buttons)},[s(t).editing?(r(),m(s(pt),{key:0})):(r(),m(s(dt),{key:1})),i(s(k),{type:"secondary",onClick:C(n,["stop"])},{default:_(()=>[F(w(s(t).editing?"Cancel":"Clear"),1)]),_:1},8,["onClick"])],2)],2)}}}),$t="R10Cz",ft="Ki00p",vt="QPkBC",ht="Hbmug",gt={form:$t,inputs:ft,buttons:vt,editing:ht},Ft={$style:gt},Pt=$(yt,[["__cssModules",Ft]]),wt={key:1},kt=p({__name:"ui",setup(a){const t=y();return x(async()=>{await t.getProductsAsync()}),(e,n)=>(r(),m(s(z),null,{title:_(()=>[F(" Products ")]),content:_(()=>[s(t).productsList.length?(r(),l(h,{key:0},[i(s(it),{class:c(e.$style.filter)},null,8,["class"]),s(t).productsList.length?(r(),l("div",{key:0,class:c(e.$style.list)},[(r(!0),l(h,null,S(s(t).filteredList,o=>(r(),m(s(I),{key:o.id,class:c([e.$style.row,{[e.$style.rowEditing]:o.id===s(t).productForForm.id}]),product:o},{extra:_(()=>[d("div",{class:c(e.$style.extra)},[i(s(ot),{id:o.id,class:c(e.$style.icon)},null,8,["id","class"]),i(s(ut),{id:o.id,class:c(e.$style.icon)},null,8,["id","class"])],2)]),_:2},1032,["class","product"]))),128))],2)):H("",!0)],64)):(r(),l("div",wt,"Your products database is empty. Please create at least one product."))]),sidebar:_(()=>[i(s(Pt))]),_:1}))}}),Ct="HxdwQ",Mt="aWWqL",bt="_0sa-i",Bt="kKOmo",St="m4OXR",Et="w2TSh",Lt={filter:Ct,list:Mt,row:bt,icon:Bt,rowEditing:St,extra:Et},At={$style:Lt},zt=$(kt,[["__cssModules",At]]);export{zt as default};
