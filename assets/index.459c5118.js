import{i as L,B as P,j,a as B,u as E,L as O}from"./ui.4e7c0ed8.js";import{_ as h,o as r,a as d,j as f,d as g,g as S,u as a,f as y,n,i as D,r as F,c as T,F as C,b as $,k as v,t as M,e as z,l as m,w as _,h as I,v as R}from"./index.4d8058f6.js";const J={},q={fill:"currentColor",height:"1em",viewBox:"0 0 512 512",width:"1em",xmlns:"http://www.w3.org/2000/svg"},G=f("path",{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},null,-1),H=[G];function K(s,l){return r(),d("svg",q,H)}const Q=h(J,[["render",K]]),W=["checked","value"],X=g({__name:"ui",props:{value:{type:Boolean,default:!1}},emits:["update:value"],setup(s,{emit:l}){const c=t=>{var i;l("update:value",((i=t==null?void 0:t.target)==null?void 0:i.checked)||!1)};return(t,i)=>(r(),d("label",{class:n([t.$style.root,{[t.$style.checked]:s.value}])},[f("span",{class:n(t.$style.checkmark)},[f("input",{"aria-hidden":"true",checked:s.value,type:"checkbox",value:s.value,onChange:c},null,40,W),s.value?(r(),S(a(Q),{key:0})):y("",!0)],2),t.$slots.default?(r(),d("span",{key:0,class:n(t.$style.text)},[D(t.$slots,"default")],2)):y("",!0)],2))}}),Y={$style:L},Z=h(X,[["__cssModules",Y]]),x=["onDragenter","onDragleave","onDrop"],ee=["accept"],te=f("h4",null,"Uploaded",-1),se=["title"],ae=g({__name:"ui",props:{value:{default:void 0},accept:{default:""}},emits:["update:value"],setup(s,{emit:l}){const c=s,t=F(null),i=T(()=>{var e;return(e=c.accept)==null?void 0:e.split(",").filter(o=>!!o)}),k=()=>{var e;return(e=t.value)==null?void 0:e.click()},u=F(!1),b=()=>{u.value=!0},A=()=>{u.value=!1},U=e=>{var o,p;u.value=!1,w((p=(o=e==null?void 0:e.dataTransfer)==null?void 0:o.files)==null?void 0:p[0])},N=e=>{var o,p;w((p=(o=e==null?void 0:e.target)==null?void 0:o.files)==null?void 0:p[0])},w=e=>{if(e){const o=e.name.split(".").pop();if(o&&c.accept&&!c.accept.includes(o))return}l("update:value",e)};return(e,o)=>(r(),d("div",{class:n([e.$style.root,{[e.$style.dragging]:u.value,[e.$style.uploaded]:s.value}]),onDragenter:_(b,["prevent"]),onDragleave:_(A,["prevent"]),onDragover:o[1]||(o[1]=_(()=>{},["prevent"])),onDrop:_(U,["prevent"])},[f("div",{class:n(e.$style.content)},[s.value?y("",!0):(r(),d(C,{key:0},[$(a(P),{class:n(e.$style.button),onClick:k},{default:v(()=>[D(e.$slots,"default")]),_:3},8,["class"]),f("input",{ref_key:"input",ref:t,accept:s.accept,class:n(e.$style.input),type:"file",onChange:N},null,42,ee),f("div",{class:n(e.$style.info)},M(a(i).length?"Or drag files of these formats here":"Or drag and drop files of any format here"),3),a(i).length?(r(),d("div",{key:0,class:n(e.$style.formats)},[(r(!0),d(C,null,z(a(i),(p,V)=>(r(),d("span",{key:V,class:n(e.$style.format)},M(p),3))),128))],2)):y("",!0)],64)),s.value?(r(),d(C,{key:1},[te,s.value?(r(),d("span",{key:0,class:n(e.$style.info),title:s.value.name},M(s.value.name),11,se)):y("",!0),$(a(P),{class:n(e.$style.button),onClick:o[0]||(o[0]=p=>w(void 0))},{default:v(()=>[m(" Upload again ")]),_:1},8,["class"])],64)):y("",!0)],2)],42,x))}}),oe={$style:j},le=h(ae,[["__cssModules",oe]]),ne=g({__name:"ui",setup(s){const l=B();return(c,t)=>(r(),S(a(P),{type:"secondary",onClick:a(l).downloadProductsAsync},{default:v(()=>[m(" Download products ")]),_:1},8,["onClick"]))}}),re=g({__name:"ui",setup(s){const l=fe();return(c,t)=>(r(),d("div",{class:n(c.$style.root)},[$(a(le),{accept:".json","onUpdate:value":a(l).uploadProductFromFile},{default:v(()=>[m(" Upload products ")]),_:1},8,["onUpdate:value"]),$(a(Z),{value:a(l).replaceCreatedProducts,"onUpdate:value":t[0]||(t[0]=i=>a(l).replaceCreatedProducts=i)},{default:v(()=>[m(" After upload all created early products will be deleted ")]),_:1},8,["value"])],2))}}),ce="Mjek0",ue={root:ce},de={$style:ue},ie=h(re,[["__cssModules",de]]),pe="upload-products",fe=I(pe,()=>{const s=R(),l=B(),c=E(),t=F(!1);return{replaceCreatedProducts:t,uploadProductFromFile:async k=>{try{const u=new FileReader;u.addEventListener("load",async()=>{u.result&&(t.value&&await c.updateMealPlanAsync({mealPlan:{products:{}}}),await l.uploadProductsAsync({products:JSON.parse(u.result),replace:t.value}),t.value=!1,s.push("/products"))},!1),u.readAsText(k)}catch(u){console.error(u)}}}}),ve=g({__name:"ui",setup(s){return(l,c)=>(r(),S(a(O),null,{title:v(()=>[m(" Settings ")]),content:v(()=>[$(a(ie)),$(a(ne),{class:n(l.$style.download)},null,8,["class"])]),_:1}))}}),ye="yrhdB",$e={download:ye},me={$style:$e},_e=h(ve,[["__cssModules",me]]);export{_e as default};
